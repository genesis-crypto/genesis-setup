name: Extract Content

on: 
  issues:
    types: [opened, reopened]

env:
  ACTIONS_ALLOW_UNSECURE_COMMANDS: true

jobs:
  extract-content:
    runs-on: ubuntu-latest
    steps:
      - name: Extract repository information from issue body
        id: extract_info
        run: |
          const issueBody = "${{ github.event.issue.body }}";
          const lines = issueBody.split("\n");
          console.log(lines)
          const nameLine = lines.find(line => line.startsWith("## [Repository]"));
          const descLine = lines.find(line => line.startsWith("## Description:"));
          const name = nameLine.substring("# Repository Name:".length).trim();
          const description = descLine.substring("# Description:".length).trim();
          console.log(`Repository Name: ${name}`);
          console.log(`Description: ${description}`);
          echo ::set-output name=repo_name::$name
          echo ::set-output name=repo_description::$description
